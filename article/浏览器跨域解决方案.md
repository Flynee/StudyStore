## 浏览器跨域解决方案

> ajax只支持同源请求（协议+域名+端口 三者相同），因此在跨域中Cookie、LocalStorage、IndexDB无法读取，DOM和JS对象无法获得, AJAX请求不能发送



## JSONP跨域

> jsonp跨域原理是利用<script>标签没有跨域限制，通过<script>标签属性src,发送带有callback参数的GET请求，服务器将返回数据传到callback函数中，返回给浏览器，浏览器解析从而获得数据

<strong>例：</strong>

​		<strong>后端：</strong>

``` javascript
var http = require('http');
var url = require('url');
var querystring = require('querystring');

http.createServer(function(req, res) {
    var URL = url.parse(req.url); // 解析路径
    var params = querystring.parse(URL.query); // 获取路径参数集合对象
    if (URL.pathname === '/test') {
        var data = { // 定义返回给客户端数据
            say: params.user+' hello world:)'
        };
        var callback = params.callback + "("+JSON.stringify(data)+")";
        console.log(callback);
        res.end(callback); // 返回数据，会立即调用callback对应的全局方法
    }
}).listen(3000, (err) => {   
    if (!err) {
        console.log('Server is running...');
    }
});
```

​		<strong>浏览器端：</strong>

```html
<script>
   <script>
    var script = document.createElement("script"); // 创建script标签对象
    script.src = "http://192.168.202.102:3000/test?user=zhang&callback=handleCallback";
    document.head.append(script);
    // 处理返回数据
    function handleCallback(res) { // 当服务器响应数据时，会立即自动调用此方法
        console.log(res); // {say: zhang hello world:)}
    }
</script>
</script>
```

